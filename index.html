<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navidad Mágica</title>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0b1d26;
            --bg-light: #1c3b4d;
            --tree-green: rgba(22, 109, 59, 0.95);
            --gold: #ffcc00;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; background: radial-gradient(circle at center, var(--bg-light), var(--bg-dark));
            display: flex; flex-direction: column; align-items: center;
        }

        /* Texto en 3 líneas centrado */
        .header {
            height: 25vh; display: flex; align-items: center; 
            justify-content: center; text-align: center; z-index: 100;
        }
        .message {
            font-family: 'Great Vibes', cursive;
            color: white; line-height: 1.1; margin: 0;
            text-shadow: 0 0 20px rgba(255,255,255,0.7);
        }
        .message span { display: block; }
        .m-main { font-size: clamp(2.2rem, 7vw, 3.8rem); }
        .m-and { font-size: clamp(1.2rem, 4vw, 2rem); margin: 2px 0; opacity: 0.8; }
        .m-sub { font-size: clamp(2.2rem, 7vw, 3.8rem); }

        /* Escena del Árbol Gigante */
        .scene {
            position: relative; flex-grow: 1; width: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: flex-end;
            padding-bottom: 20px;
        }

        .tree-container { 
            position: relative; 
            width: min(450px, 95vw); /* Responsive width */
            height: 550px; /* Fixed height for consistent layering */
            display: flex; 
            flex-direction: column; 
            align-items: center; 
        }

        .star {
            font-size: clamp(3rem, 10vw, 4rem); color: var(--gold);
            text-shadow: 0 0 30px gold, 0 0 50px white;
            z-index: 50; 
            margin-bottom: -100px; /* Acercar a la punta (ajustar este valor) */
            animation: pulse 2s infinite alternate;
        }

        /* 5 Capas del árbol */
        .layer {
            position: absolute; width: 0; height: 0;
            border-left: transparent solid; border-right: transparent solid;
            border-bottom: var(--tree-green) solid;
            filter: drop-shadow(0 15px 12px rgba(0,0,0,0.6));
        }
        /* Ajuste de proporciones para 5 capas */
        .l1 { border-left-width: 200px; border-right-width: 200px; border-bottom-width: 240px; bottom: 0; }
        .l2 { border-left-width: 165px; border-right-width: 165px; border-bottom-width: 200px; bottom: 90px; }
        .l3 { border-left-width: 130px; border-right-width: 130px; border-bottom-width: 160px; bottom: 170px; }
        .l4 { border-left-width: 95px; border-right-width: 95px; border-bottom-width: 120px; bottom: 240px; }
        .l5 { border-left-width: 60px; border-right-width: 60px; border-bottom-width: 90px; bottom: 300px; z-index: 2; }

        .trunk { 
            width: 55px; 
            height: 70px; /* Tronco más alto */
            background: #3d2516; 
            border-radius: 4px; 
            z-index: 1; 
            margin-top: -5px; 
        }

        /* Guirnalda envolvente */
        .light {
            position: absolute; width: 7px; height: 7px; border-radius: 50%;
            z-index: 60; box-shadow: 0 0 8px white;
            animation: twinkle 1s infinite alternate;
        }

        /* Regalos realistas mejorados */
        .gifts { position: absolute; bottom: 10px; display: flex; align-items: flex-end; gap: 15px; z-index: 70; }
        .gift { position: relative; border-radius: 3px; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .gift::before { /* Cinta vertical */
            content: ''; position: absolute; left: 45%; width: 15%; height: 100%; background: rgba(255,255,255,0.4); 
        }
        .gift::after { /* Cinta horizontal */
            content: ''; position: absolute; top: 45%; width: 100%; height: 15%; background: rgba(255,255,255,0.4); 
        }

        .g1 { width: 75px; height: 70px; background: #c0392b; }
        .g2 { width: 50px; height: 50px; background: #2980b9; transform: rotate(-12deg); }
        .g3 { width: 60px; height: 45px; background: #f1c40f; transform: rotate(8deg); }
        .g4 { width: 40px; height: 40px; background: #27ae60; }

        /* Fuegos Artificiales */
        .firework { position: absolute; pointer-events: none; z-index: 5; }
        .particle {
            position: absolute; width: 4px; height: 4px; border-radius: 50%;
            animation: explode 2s ease-out forwards;
        }

        @keyframes explode {
            0% { transform: translate(0, 0); opacity: 1; }
            100% { transform: translate(var(--x), var(--y)); opacity: 0; }
        }
        @keyframes twinkle { from { opacity: 0.3; transform: scale(0.8); } to { opacity: 1; transform: scale(1.1); } }
        @keyframes pulse { from { transform: scale(1); } to { transform: scale(1.1); } }
        
        .snow { position: absolute; color: white; top: -20px; animation: fall linear forwards; pointer-events: none; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }
    </style>
</head>
<body>

    <div class="header">
        <h1 class="message">
            <span class="m-main">Feliz Navidad</span>
            <span class="m-and">y</span>
            <span class="m-sub">Próspero Año Nuevo</span>
        </h1>
    </div>

    <div class="scene">
        <div class="star">★</div>
        <div class="tree-container" id="tree-canvas">
            <div class="layer l1"></div>
            <div class="layer l2"></div>
            <div class="layer l3"></div>
            <div class="layer l4"></div>
            <div class="layer l5"></div>
        </div>
        <div class="trunk"></div>

        <div class="gifts">
            <div class="gift g2"></div>
            <div class="gift g1"></div>
            <div class="gift g4"></div>
            <div class="gift g3"></div>
        </div>
    </div>

    <script>
        const treeCanvas = document.getElementById('tree-canvas');
        const colors = ['#ff4d4d', '#fbff00', '#00f2ff', '#ff00f2', '#4dff88'];

        // Guirnalda envolvente (espiral matemática)
        for (let i = 0; i < 120; i++) {
            const light = document.createElement('div');
            light.className = 'light';
            const progress = i / 120;
            const angle = progress * Math.PI * 14; // Más vueltas para el árbol grande
            const radius = progress * 190;
            const x = Math.cos(angle) * radius;
            // Ajustar la posición Y para que la guirnalda inicie más arriba en el árbol más grande
            const y = 430 - (progress * 430); 
            
            light.style.left = `calc(50% + ${x}px)`;
            light.style.bottom = `${y}px`;
            light.style.backgroundColor = colors[i % colors.length];
            light.style.animationDelay = Math.random() + 's';
            treeCanvas.appendChild(light);
        }

        // Fuegos Artificiales
        function launchFirework() {
            const fw = document.createElement('div');
            fw.className = 'firework';
            fw.style.left = Math.random() * 100 + 'vw';
            fw.style.top = Math.random() * 50 + 'vh';
            
            const color = colors[Math.floor(Math.random() * colors.length)];
            for (let i = 0; i < 45; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                p.style.backgroundColor = color;
                p.style.boxShadow = `0 0 10px ${color}`;
                const angle = Math.random() * Math.PI * 2;
                const dist = Math.random() * 200 + 50;
                p.style.setProperty('--x', Math.cos(angle) * dist + 'px');
                p.style.setProperty('--y', Math.sin(angle) * dist + 'px');
                fw.appendChild(p);
            }
            document.body.appendChild(fw);
            setTimeout(() => fw.remove(), 2000);
        }
        setInterval(launchFirework, 1300);

        // Nieve
        setInterval(() => {
            const snow = document.createElement('div');
            snow.className = 'snow';
            snow.innerHTML = '❄';
            snow.style.left = Math.random() * 100 + 'vw';
            snow.style.fontSize = Math.random() * 12 + 10 + 'px';
            snow.style.opacity = Math.random();
            snow.style.animationDuration = Math.random() * 3 + 4 + 's';
            document.body.appendChild(snow);
            setTimeout(() => snow.remove(), 6000);
        }, 150);
    </script>
</body>
</html>